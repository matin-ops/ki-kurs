<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Automation f√ºr KMUs | Prozesse automatisieren. Kosten senken. Wachstum skalieren.</title>
  <meta name="description" content="AI Automation f√ºr KMUs: wiederkehrende Prozesse automatisieren, Support entlasten, Sales beschleunigen ‚Äì ohne IT-Gro√üprojekt." />
  <meta name="theme-color" content="#0b1220" />
  <style>
    :root{
      --bg:#070b14; --card:#0b1220; --muted:#9aa7bf; --text:#eaf0ff; --line:#18233a;
      --acc:#6ee7ff; --acc2:#a78bfa; --ok:#34d399; --warn:#fbbf24;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text); background: radial-gradient(1200px 600px at 10% 0%, rgba(110,231,255,.18), transparent 55%),
                                 radial-gradient(900px 500px at 90% 10%, rgba(167,139,250,.18), transparent 60%),
                                 linear-gradient(180deg, #050813, #070b14 35%, #050813);
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    .container{max-width:1120px; margin:0 auto; padding:24px}
    .nav{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(7,11,20,.55);
      border-bottom:1px solid rgba(24,35,58,.65);
    }
    .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:12px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.2px}
    .logo{
      width:34px; height:34px; border-radius:12px;
      background: linear-gradient(135deg, rgba(110,231,255,.95), rgba(167,139,250,.95));
      box-shadow: var(--shadow);
    }
    .nav-links{display:flex; gap:14px; align-items:center; flex-wrap:wrap}
    .nav-links a{color:var(--muted); font-size:14px}
    .nav-links a:hover{color:var(--text)}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:12px 16px; border-radius:14px; border:1px solid rgba(110,231,255,.35);
      background: linear-gradient(135deg, rgba(110,231,255,.14), rgba(167,139,250,.14));
      color:var(--text); box-shadow: 0 10px 22px rgba(0,0,0,.25);
      font-weight:650; cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      white-space:nowrap;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(110,231,255,.6)}
    .btn.secondary{
      background: rgba(11,18,32,.6);
      border:1px solid rgba(154,167,191,.22);
      color:var(--text);
      box-shadow:none;
    }
    .hero{padding:46px 0 18px}
    .grid{display:grid; gap:18px}
    .hero-grid{grid-template-columns: 1.15fr .85fr; align-items:stretch}
    @media (max-width: 920px){ .hero-grid{grid-template-columns:1fr} }
    .kicker{
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 12px; border-radius:999px;
      border:1px solid rgba(110,231,255,.25);
      background: rgba(11,18,32,.55);
      color:var(--muted); font-size:13px;
    }
    .dot{width:8px; height:8px; border-radius:999px; background: var(--ok); box-shadow:0 0 0 4px rgba(52,211,153,.15)}
    h1{
      margin:16px 0 10px; font-size: clamp(30px, 4.2vw, 54px);
      line-height:1.06; letter-spacing:-.6px;
    }
    .sub{
      color:var(--muted); font-size: 17px; line-height:1.5; max-width: 62ch;
    }
    .cta-row{display:flex; gap:12px; flex-wrap:wrap; margin-top:18px}
    .trust{display:flex; gap:14px; flex-wrap:wrap; margin-top:18px; color:var(--muted); font-size:13px}
    .pill{display:inline-flex; gap:8px; align-items:center; padding:8px 10px; border-radius:999px; border:1px solid rgba(154,167,191,.18); background: rgba(11,18,32,.45)}
    .card{
      background: rgba(11,18,32,.78);
      border:1px solid rgba(24,35,58,.8);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .card.pad{padding:18px}
    .panel{padding:18px}
    .panel h3{margin:0 0 10px}
    .panel p{margin:0; color:var(--muted); line-height:1.55}
    .stats{display:grid; grid-template-columns: repeat(3,1fr); gap:12px; margin-top:14px}
    @media (max-width: 560px){ .stats{grid-template-columns:1fr} }
    .stat{
      padding:14px; border-radius: 14px;
      border:1px solid rgba(154,167,191,.16);
      background: rgba(7,11,20,.45);
    }
    .stat b{display:block; font-size:18px}
    .stat span{color:var(--muted); font-size:13px}
    .section{padding:26px 0}
    .section h2{font-size: 26px; margin:0 0 12px}
    .section .lead{color:var(--muted); margin:0 0 18px; line-height:1.6}
    .cards{display:grid; grid-template-columns: repeat(3, 1fr); gap:14px}
    @media (max-width: 920px){ .cards{grid-template-columns:1fr} }
    .feature{padding:16px}
    .icon{
      width:40px; height:40px; border-radius:14px;
      display:grid; place-items:center;
      background: linear-gradient(135deg, rgba(110,231,255,.18), rgba(167,139,250,.18));
      border:1px solid rgba(110,231,255,.22);
      margin-bottom:10px;
    }
    .feature h3{margin:6px 0 8px; font-size:16px}
    .feature p{margin:0; color:var(--muted); line-height:1.55; font-size:14px}
    .split{grid-template-columns: 1fr 1fr; gap:16px}
    @media (max-width: 920px){ .split{grid-template-columns:1fr} }
    .list{display:grid; gap:10px; margin-top:12px}
    .li{display:flex; gap:10px; align-items:flex-start}
    .check{
      width:22px; height:22px; border-radius:8px; margin-top:1px;
      display:grid; place-items:center;
      background: rgba(52,211,153,.14); border:1px solid rgba(52,211,153,.28);
      flex:0 0 auto;
    }
    .li span{color:var(--muted); line-height:1.5; font-size:14px}
    .form{
      padding:18px; display:grid; gap:12px
    }
    label{font-size:13px; color:var(--muted)}
    input, textarea{
      width:100%; padding:12px 12px; border-radius:12px;
      border:1px solid rgba(154,167,191,.18);
      background: rgba(7,11,20,.55);
      color:var(--text);
      outline:none;
    }
    input:focus, textarea:focus{border-color: rgba(110,231,255,.55)}
    textarea{min-height: 110px; resize: vertical}
    .fineprint{color:var(--muted); font-size:12px; line-height:1.4}
    .footer{padding:26px 0 40px; color:var(--muted); font-size:13px}
    .toast{
      position: fixed; right: 16px; bottom: 16px; max-width: 360px;
      padding:12px 14px; border-radius:14px;
      background: rgba(11,18,32,.9);
      border:1px solid rgba(24,35,58,.9);
      box-shadow: var(--shadow);
      display:none;
    }
    .toast.show{display:block}
    .toast b{display:block; margin-bottom:4px}
  </style>
</head>

<body>
  <div class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>AI Automation <span style="color:var(--muted); font-weight:600">f√ºr KMUs</span></div>
      </div>
      <div class="nav-links">
        <a href="#leistungen">Leistungen</a>
        <a href="#usecases">Use-Cases</a>
        <a href="#ablauf">Ablauf</a>
        <a href="#kontakt" class="btn">Kostenloser Check</a>
      </div>
    </div>
  </div>

  <header class="container hero" id="top">
    <div class="grid hero-grid">
      <div>
        <div class="kicker"><span class="dot"></span> In 14 Tagen zu messbarer Entlastung ‚Äì ohne IT-Gro√üprojekt</div>
        <h1>AI Automation, die KMUs <span style="background:linear-gradient(135deg,var(--acc),var(--acc2)); -webkit-background-clip:text; background-clip:text; color:transparent;">wirklich</span> Zeit & Geld spart.</h1>
        <p class="sub">
          Wir automatisieren wiederkehrende Prozesse in Vertrieb, Backoffice und Support ‚Äì mit pragmatischen Workflows
          (z.B. n8n, Zapier, Make, Microsoft/Google, Slack, HubSpot, Stripe). Ergebnis: weniger manuelle Arbeit, weniger Fehler, schnelleres Wachstum.
        </p>

        <div class="cta-row">
          <a class="btn" href="#kontakt">Kostenlosen Automations-Check sichern</a>
          <a class="btn secondary" href="#usecases">Use-Cases ansehen</a>
        </div>

        <div class="trust">
          <div class="pill">‚úÖ DSGVO- & Sicherheitsfokus</div>
          <div class="pill">‚ö° Quick Wins statt Monatelang</div>
          <div class="pill">üìà KPI-basiert (Zeit, Kosten, Conversion)</div>
        </div>
      </div>

      <div class="card panel">
        <h3>Was du bekommst</h3>
        <p>In 30 Minuten identifizieren wir 3‚Äì5 Prozesse, die sich sofort automatisieren lassen ‚Äì inklusive ROI-Sch√§tzung.</p>

        <div class="stats">
          <div class="stat"><b>10‚Äì40%</b><span>weniger Admin-Aufwand</span></div>
          <div class="stat"><b>24/7</b><span>Support & Lead-Routing</span></div>
          <div class="stat"><b>2‚Äì6 Wochen</b><span>bis zur skalierbaren L√∂sung</span></div>
        </div>

        <div class="list" style="margin-top:14px">
          <div class="li"><div class="check">‚úì</div><span>Automations-Roadmap & Priorisierung</span></div>
          <div class="li"><div class="check">‚úì</div><span>Umsetzung inkl. Tests, Monitoring & Doku</span></div>
          <div class="li"><div class="check">‚úì</div><span>√úbergabe + Enablement f√ºrs Team</span></div>
        </div>

        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap">
          <a class="btn secondary" href="#ablauf">So l√§uft‚Äôs ab</a>
          <a class="btn" href="#kontakt">Termin anfragen</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="section" id="leistungen">
      <h2>Leistungen</h2>
      <p class="lead">Pragmatisch, schnell, messbar. Du bekommst keine Folien ‚Äì du bekommst laufende Automationen.</p>

      <div class="cards">
        <div class="card feature">
          <div class="icon">‚öôÔ∏è</div>
          <h3>Prozess-Automation</h3>
          <p>Wiederkehrende Aufgaben eliminieren: Rechnungen, Reminder, Datenpflege, Reporting, Ticket-Routing, Onboarding.</p>
        </div>
        <div class="card feature">
          <div class="icon">ü§ñ</div>
          <h3>AI Assistants</h3>
          <p>Interne Assistenten f√ºr SOPs, Wissenssuche, Angebotsentw√ºrfe, E-Mails, FAQ ‚Äì mit klaren Guardrails.</p>
        </div>
        <div class="card feature">
          <div class="icon">üìä</div>
          <h3>Integrationen & Daten</h3>
          <p>APIs verbinden, Datenqualit√§t erh√∂hen, Single-Source-of-Truth: HubSpot, Shopify, Stripe, Google/Microsoft, Slack.</p>
        </div>
      </div>
    </section>

    <section class="section" id="usecases">
      <div class="grid split">
        <div class="card pad">
          <h2>Typische Use-Cases (KMU)</h2>
          <p class="lead">Wenn du das wiedererkennst, lohnt sich Automation sofort.</p>
          <div class="list">
            <div class="li"><div class="check">‚úì</div><span><b>Lead ‚Üí Angebot</b>: Anfrage aus Formular/Inbox ‚Üí Qualifizierung ‚Üí CRM ‚Üí Angebotstext ‚Üí Follow-ups.</span></div>
            <div class="li"><div class="check">‚úì</div><span><b>Rechnungen & Mahnwesen</b>: Status pr√ºfen ‚Üí Reminder-Sequenz ‚Üí Eskalation ‚Üí Task an Team.</span></div>
            <div class="li"><div class="check">‚úì</div><span><b>Support Entlastung</b>: Tickets clustern ‚Üí Antwortvorschl√§ge ‚Üí SLA-Routing ‚Üí Knowledge-Base.</span></div>
            <div class="li"><div class="check">‚úì</div><span><b>Reporting</b>: Daten ziehen ‚Üí KPI-Dashboard ‚Üí Slack/Email Summary w√∂chentlich.</span></div>
          </div>
        </div>

        <div class="card pad">
          <h2>Tool-Stack (Beispiele)</h2>
          <p class="lead">Wir arbeiten dort, wo du schon bist ‚Äì und erg√§nzen nur, was wirklich n√∂tig ist.</p>
          <div class="cards" style="grid-template-columns:repeat(2,1fr); gap:10px">
            <div class="stat"><b>n8n / Make</b><span>Workflow Automation</span></div>
            <div class="stat"><b>Zapier</b><span>Schnelle Integrationen</span></div>
            <div class="stat"><b>HubSpot</b><span>CRM & Sequences</span></div>
            <div class="stat"><b>Slack</b><span>Freigaben & Alerts</span></div>
            <div class="stat"><b>Google/M365</b><span>Docs, Sheets, Mail</span></div>
            <div class="stat"><b>Stripe/Shopify</b><span>Payments & Commerce</span></div>
          </div>
          <p class="fineprint" style="margin-top:12px">
            Hinweis: Wir setzen auf sichere Konfiguration, Rollen/Permissions, Logging & nachvollziehbare Prompts.
          </p>
        </div>
      </div>
    </section>

    <section class="section" id="ablauf">
      <h2>Ablauf</h2>
      <p class="lead">Klarer Prozess. Du wei√üt jederzeit, was als N√§chstes passiert.</p>

      <div class="cards">
        <div class="card feature">
          <div class="icon">1</div>
          <h3>Discovery (30 Min)</h3>
          <p>Ist-Prozesse, Pain Points, Datenquellen. Wir definieren Erfolg: Zeit, Kosten, Fehlerquote, Conversion.</p>
        </div>
        <div class="card feature">
          <div class="icon">2</div>
          <h3>MVP in 7‚Äì14 Tagen</h3>
          <p>Erster Workflow live: Trigger ‚Üí Verarbeitung ‚Üí Freigabe ‚Üí Logging ‚Üí Monitoring. Quick Win + Lerneffekte.</p>
        </div>
        <div class="card feature">
          <div class="icon">3</div>
          <h3>Skalierung</h3>
          <p>Automations-Backlog, weitere Integrationen, SOPs, Qualit√§tssicherung. √úbergabe & Enablement.</p>
        </div>
      </div>
    </section>

    <section class="section" id="kontakt">
      <div class="grid split">
        <div class="card pad">
          <h2>Kostenloser Automations-Check</h2>
          <p class="lead">Schick kurz deine Situation ‚Äì du bekommst innerhalb von 24h einen Vorschlag f√ºr n√§chste Schritte.</p>
          <div class="list">
            <div class="li"><div class="check">‚úì</div><span>3‚Äì5 Automations-Ideen</span></div>
            <div class="li"><div class="check">‚úì</div><span>ROI-Sch√§tzung (Zeit/Kosten)</span></div>
            <div class="li"><div class="check">‚úì</div><span>Empfohlener MVP-Scope</span></div>
          </div>
          <p class="fineprint" style="margin-top:14px">
            Kein Spam. Deine Daten bleiben privat. Optional k√∂nnen wir eine NDA nutzen.
          </p>
        </div>

        <div class="card form">
          <form id="leadForm">
            <div>
              <label for="name">Name</label>
              <input id="name" name="name" placeholder="Max Mustermann" required />
            </div>
            <div>
              <label for="email">E-Mail</label>
              <input id="email" name="email" type="email" placeholder="max@firma.de" required />
            </div>
            <div>
              <label for="company">Firma (optional)</label>
              <input id="company" name="company" placeholder="Muster GmbH" />
            </div>
            <div>
              <label for="msg">Was willst du automatisieren?</label>
              <textarea id="msg" name="msg" placeholder="z.B. Leads aus Formular ‚Üí HubSpot ‚Üí Angebot + Follow-up ‚Ä¶" required></textarea>
            </div>

            <button class="btn" type="submit">Anfrage senden</button>
            <div class="fineprint">
              Standardm√§√üig √∂ffnet sich dein E-Mail-Programm (mailto). Wenn du ein Webhook-Formular willst (z.B. n8n),
              sag kurz Bescheid ‚Äì dann baue ich dir die POST-Variante.
            </div>
          </form>
        </div>
      </div>
    </section>

    <div class="footer">
      <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
        <div>¬© <span id="year"></span> AI Automation f√ºr KMUs</div>
        <div style="display:flex; gap:14px; flex-wrap:wrap">
          <a href="#top">Nach oben</a>
          <a href="javascript:void(0)" onclick="alert('Platzhalter: Impressum/Datenschutz einf√ºgen.');">Impressum</a>
          <a href="javascript:void(0)" onclick="alert('Platzhalter: Datenschutz einf√ºgen.');">Datenschutz</a>
        </div>
      </div>
    </div>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite">
    <b>Fast geschafft!</b>
    <div id="toastText" style="color:var(--muted)">Dein E-Mail-Client sollte sich ge√∂ffnet haben.</div>
  </div>

  <script>
    // Smooth scroll for in-page links
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', (e) => {
        const href = a.getAttribute('href');
        const el = document.querySelector(href);
        if (!el) return;
        e.preventDefault();
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Simple form: opens mail client (no backend needed)
    const form = document.getElementById('leadForm');
    const toast = document.getElementById('toast');
    const toastText = document.getElementById('toastText');

    function showToast(msg){
      toastText.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'), 4500);
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());
      const subject = encodeURIComponent("Automations-Check Anfrage");
      const body = encodeURIComponent(
        `Name: ${data.name}\nE-Mail: ${data.email}\nFirma: ${data.company || "-"}\n\nThema:\n${data.msg}\n`
      );

      // TODO: Replace with your email address
      const to = "hello@deine-domain.de";

      // Open mail client
      window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
      showToast("Dein E-Mail-Client sollte sich ge√∂ffnet haben. Wenn nicht: E-Mail-Adresse im Code anpassen.");
      form.reset();
    });
  </script>


<!-- SIMPLE CHAT WIDGET (no imports) -->
<div id="simple-chat-root"></div>

<script>
  // --- Minimal "createChat" you can call like the n8n one ---
  function createChat(options) {
    if (!options || !options.webhookUrl) throw new Error("createChat: webhookUrl is required");

    const cfg = {
      webhookUrl: options.webhookUrl,
      target: options.target || "#simple-chat-root",
      title: options.title || "Assistant",
      subtitle: options.subtitle || "Ask me anything",
      initialMessages: options.initialMessages || ["Hi üëã", "How can I help you today?"],
      metadata: options.metadata || {},
      storageKey: options.storageKey || "simple_chat_session_v1",
    };

    const mount = document.querySelector(cfg.target);
    if (!mount) throw new Error("createChat: target not found: " + cfg.target);

    // Session
    const existingSession = localStorage.getItem(cfg.storageKey);
    const sessionId = existingSession || (crypto?.randomUUID ? crypto.randomUUID() : String(Date.now()) + Math.random());
    if (!existingSession) localStorage.setItem(cfg.storageKey, sessionId);

    // Helpers
    const esc = (s) => String(s).replace(/[&<>"']/g, (m) => ({
      "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#039;"
    }[m]));

    const nowTime = () => new Date().toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" });

    // UI
    mount.innerHTML = `
      <style>
        .scw-launcher{
          position:fixed; right:18px; bottom:18px; z-index:999999;
          width:54px; height:54px; border-radius:999px; border:0;
          background:linear-gradient(135deg,#6366f1,#10b981);
          box-shadow:0 14px 35px rgba(0,0,0,.35);
          cursor:pointer; display:grid; place-items:center;
        }
        .scw-launcher:active{ transform:translateY(1px); }
        .scw-launcher svg{ width:24px; height:24px; fill:#fff; }

        .scw{
          position:fixed; right:18px; bottom:84px; z-index:999999;
          width:min(380px,calc(100vw - 36px));
          height:min(560px,calc(100vh - 140px));
          border-radius:16px;
          background:rgba(15,23,42,.92);
          border:1px solid rgba(255,255,255,.12);
          box-shadow:0 22px 70px rgba(0,0,0,.55);
          overflow:hidden;
          display:none;
          font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
          color:rgba(255,255,255,.92);
          backdrop-filter: blur(10px);
        }
        .scw.open{ display:flex; flex-direction:column; }

        .scw-header{
          padding:12px 12px 10px;
          border-bottom:1px solid rgba(255,255,255,.10);
          display:flex; align-items:center; justify-content:space-between; gap:10px;
        }
        .scw-title{ font-weight:700; font-size:14px; line-height:1.1; }
        .scw-sub{ font-size:12px; opacity:.70; margin-top:2px; }
        .scw-actions{ display:flex; gap:8px; }
        .scw-btn{
          border:1px solid rgba(255,255,255,.14);
          background:rgba(255,255,255,.06);
          color:rgba(255,255,255,.92);
          border-radius:10px;
          padding:6px 9px;
          font-size:12px;
          cursor:pointer;
        }
        .scw-btn:hover{ background:rgba(255,255,255,.09); }

        .scw-body{
          padding:12px;
          flex:1;
          overflow:auto;
          display:flex;
          flex-direction:column;
          gap:10px;
        }
        .scw-bubble{
          max-width:85%;
          padding:10px 12px;
          border-radius:14px;
          line-height:1.35;
          font-size:13px;
          white-space:pre-wrap;
          word-wrap:break-word;
        }
        .scw-bot{
          background:rgba(255,255,255,.08);
          border:1px solid rgba(255,255,255,.10);
          align-self:flex-start;
        }
        .scw-user{
          background:rgba(99,102,241,.22);
          border:1px solid rgba(99,102,241,.30);
          align-self:flex-end;
        }
        .scw-meta{
          margin-top:6px;
          font-size:11px;
          opacity:.65;
        }
        .scw-footer{
          padding:10px;
          border-top:1px solid rgba(255,255,255,.10);
          display:flex;
          gap:8px;
          align-items:flex-end;
        }
        .scw-input{
          flex:1;
          min-height:40px;
          max-height:110px;
          resize:none;
          border-radius:12px;
          border:1px solid rgba(255,255,255,.14);
          background:rgba(2,6,23,.35);
          color:rgba(255,255,255,.92);
          padding:10px 10px;
          font-size:13px;
          outline:none;
        }
        .scw-send{
          width:44px; height:44px;
          border-radius:12px; border:0;
          background:linear-gradient(135deg,#6366f1,#10b981);
          cursor:pointer;
          display:grid; place-items:center;
          box-shadow:0 10px 25px rgba(0,0,0,.25);
        }
        .scw-send:disabled{ opacity:.6; cursor:not-allowed; }
        .scw-send svg{ width:18px; height:18px; fill:#fff; }
        .scw-status{ font-size:11px; opacity:.70; padding:0 12px 10px; }
      </style>

      <button class="scw-launcher" aria-label="Open chat">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 4h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9l-5 4v-4H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm3 6h10a1 1 0 1 0 0-2H7a1 1 0 0 0 0 2zm0 4h7a1 1 0 1 0 0-2H7a1 1 0 0 0 0 2z"/>
        </svg>
      </button>

      <div class="scw" role="dialog" aria-label="Chat">
        <div class="scw-header">
          <div>
            <div class="scw-title">${esc(cfg.title)}</div>
            <div class="scw-sub">${esc(cfg.subtitle)}</div>
          </div>
          <div class="scw-actions">
            <button class="scw-btn scw-clear" type="button">Clear</button>
            <button class="scw-btn scw-close" type="button">Close</button>
          </div>
        </div>

        <div class="scw-body"></div>
        <div class="scw-status" aria-live="polite"></div>

        <div class="scw-footer">
          <textarea class="scw-input" rows="1" placeholder="Type your message..."></textarea>
          <button class="scw-send" type="button" aria-label="Send">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M2 21l21-9L2 3v7l15 2-15 2v7z"/>
            </svg>
          </button>
        </div>
      </div>
    `;

    const launcher = mount.querySelector(".scw-launcher");
    const panel = mount.querySelector(".scw");
    const body = mount.querySelector(".scw-body");
    const input = mount.querySelector(".scw-input");
    const sendBtn = mount.querySelector(".scw-send");
    const closeBtn = mount.querySelector(".scw-close");
    const clearBtn = mount.querySelector(".scw-clear");
    const status = mount.querySelector(".scw-status");

    function addMessage(role, text) {
      const bubble = document.createElement("div");
      bubble.className = "scw-bubble " + (role === "user" ? "scw-user" : "scw-bot");
      bubble.innerHTML = `${esc(text)}<div class="scw-meta">${role === "user" ? "You" : cfg.title} ¬∑ ${nowTime()}</div>`;
      body.appendChild(bubble);
      body.scrollTop = body.scrollHeight;
    }

    function setStatus(s) {
      status.textContent = s || "";
    }

    // Seed initial messages once per session (simple approach)
    // If you want persistence of messages, we can add it ‚Äî but keeping this minimal.
    cfg.initialMessages.forEach((m) => addMessage("bot", m));

    function open() {
      panel.classList.add("open");
      setTimeout(() => input.focus(), 50);
    }
    function close() {
      panel.classList.remove("open");
      setStatus("");
    }
    function toggle() {
      panel.classList.contains("open") ? close() : open();
    }

    launcher.addEventListener("click", toggle);
    closeBtn.addEventListener("click", close);
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && panel.classList.contains("open")) close();
    });

    clearBtn.addEventListener("click", () => {
      body.innerHTML = "";
      cfg.initialMessages.forEach((m) => addMessage("bot", m));
      setStatus("Cleared.");
      setTimeout(() => setStatus(""), 800);
    });

    async function sendMessage() {
      const text = input.value.trim();
      if (!text) return;

      addMessage("user", text);
      input.value = "";
      input.style.height = "auto";

      sendBtn.disabled = true;
      setStatus("Thinking‚Ä¶");

      try {
        // n8n-friendly payload:
        // - chatInput: what user typed
        // - sessionId: stable session
        // - metadata: optional context
        const res = await fetch(cfg.webhookUrl, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            chatInput: text,
            sessionId,
            metadata: cfg.metadata
          }),
        });

        const ct = (res.headers.get("content-type") || "").toLowerCase();
        let replyText = "";

        if (ct.includes("application/json")) {
          const data = await res.json();
          // Common patterns
          replyText =
            (typeof data === "string" && data) ||
            data.text ||
            data.message ||
            data.output ||
            data.answer ||
            (data.data && (data.data.text || data.data.message)) ||
            JSON.stringify(data, null, 2);
        } else {
          replyText = await res.text();
        }

        replyText = (replyText || "").trim();
        if (!replyText) replyText = "(No response text returned.)";

        addMessage("bot", replyText);
        setStatus("");
      } catch (err) {
        addMessage("bot", "‚ö†Ô∏è Error calling webhook. Check the URL + CORS + n8n response settings.");
        setStatus("");
        console.error(err);
      } finally {
        sendBtn.disabled = false;
        input.focus();
      }
    }

    sendBtn.addEventListener("click", sendMessage);

    // Enter to send, Shift+Enter newline
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });

    // Auto-grow textarea
    input.addEventListener("input", () => {
      input.style.height = "auto";
      input.style.height = Math.min(input.scrollHeight, 110) + "px";
    });

    // Return an API (optional)
    return { open, close, toggle };
  }

  // --- Your call (same style as n8n's) ---
  createChat({
    webhookUrl: "https://mindsofcreators.app.n8n.cloud/webhook/fc8a84f5-7d82-450b-b959-215beb70d83d/chat"
  });
</script>


</body>
</html>
